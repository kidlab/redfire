<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:v="com.salesbuilder.view.*" xmlns:m="com.salesbuilder.model.*" xmlns:mx="http://www.adobe.com/2006/mxml"
	verticalGap="0"
	icon="@Embed('/assets/icon_opportunity.png')"
	creationComplete="initComp()">
	
	<mx:Script>
		<![CDATA[
			import com.salesbuilder.model.Opportunity;
		
			import mx.controls.Label;

			private var selectedOption:Label;

			[Bindable]
			private var _opportunity:Opportunity;

			public function set opportunity(opportunity:Opportunity):void
			{
				_opportunity = opportunity;
				label = opportunity.opportunityId>0?opportunity.name:"New Transfer";
			}
			
			public function get opportunity():Opportunity
			{
				return _opportunity;
			}
			
			private function initComp():void
			{
				selectedOption = labels[0];
				selectedOption.setStyle('fontWeight', 'bold');	
			}

			private function optionMouseOver(event:MouseEvent):void
			{
				if (event.currentTarget != selectedOption)
				{
					Label(event.currentTarget).setStyle('color', '#666666');
					Label(event.currentTarget).setStyle('fontWeight', 'bold');	
				}
			}
	
			private function optionMouseOut(event:MouseEvent):void
			{
				if (event.currentTarget != selectedOption)
				{
					Label(event.currentTarget).setStyle('color', '#000000');
					Label(event.currentTarget).setStyle('fontWeight', 'normal');	
				}
			}
	
			private function optionMouseDown(event:MouseEvent):void
			{
				if (event.currentTarget != selectedOption)
				{
					if (selectedOption)
					{
						selectedOption.setStyle('color', '#000000');
						selectedOption.setStyle('fontWeight', 'normal');	
					}
					selectedOption = event.currentTarget as Label;
					Label(event.currentTarget).setStyle('color', '#000000');
					Label(event.currentTarget).setStyle('fontWeight', 'bold');	
					vs.selectedIndex = Label(event.currentTarget).repeaterIndex;
				}
			}
			
		]]>
	</mx:Script>

	<mx:HBox backgroundColor="#EBEBEB" height="28" width="100%" paddingTop="6" paddingLeft="8">
		<mx:Repeater id="options" dataProvider="{vs.getChildren()}">
			<mx:Label id="labels" text="{options.currentItem.label}" creationComplete="Label(event.currentTarget).width = Label(event.currentTarget).width + 10"
				mouseDown="optionMouseDown(event)"
				mouseOver="optionMouseOver(event)"
				mouseOut="optionMouseOut(event)"/>
		</mx:Repeater>
	</mx:HBox>	

	<mx:HRule bottom="0" width="100%" height="1" strokeColor="#B9B9B9"/>

	<mx:ViewStack id="vs" width="100%" height="100%">
		<v:OpportunityInfo id="info" opportunity="{_opportunity}"/>
		<mx:VBox label="Reciept"/>
		<mx:VBox label="Spreadsheet"/>
		<mx:VBox label="Accounting"/>
	</mx:ViewStack>
	
</mx:VBox>